{"version":3,"sources":["webpack:///./node_modules/core-js/internals/use-symbol-as-uid.js","webpack:///./node_modules/core-js/internals/native-promise-constructor.js","webpack:///./src/components/Simulation/index.tsx","webpack:///./src/simulations/procedural-dungeon/util.ts","webpack:///./src/simulations/procedural-dungeon/constants.ts","webpack:///./src/simulations/procedural-dungeon/Room.ts","webpack:///./src/simulations/procedural-dungeon/ProceduralDungeon.ts","webpack:///./src/simulations/procedural-dungeon/index.ts","webpack:///./src/components/Button/index.tsx","webpack:///./src/pages/projects/simulations/procedural-dungeon.tsx","webpack:///./node_modules/core-js/internals/new-promise-capability.js","webpack:///./node_modules/core-js/modules/es.math.hypot.js","webpack:///./node_modules/core-js/internals/species-constructor.js","webpack:///./node_modules/core-js/internals/native-symbol.js","webpack:///./src/components/Simulation/simulation.module.css","webpack:///./src/components/Button/button.module.css","webpack:///./src/pages/projects/simulations/dungeon.module.css","webpack:///./node_modules/core-js/modules/es.promise.finally.js","webpack:///./node_modules/core-js/internals/well-known-symbol.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack:///./node_modules/core-js/internals/promise-resolve.js"],"names":["NATIVE_SYMBOL","module","exports","Symbol","sham","iterator","global","Promise","Simulation","sketch","divRef","useRef","useEffect","current","P5","className","styles","simulation","ref","randomFromTo","min","max","Math","random","randomMiddle","Room","p5","x1","x2","y1","y2","exits","level","maxLevel","onPath","hasKey","isDungeonEntrance","isDungeonExit","this","render","strokeWeight","stroke","fill","beginShape","vertex","endShape","renderText","forEach","exit","noStroke","textSize","textAlign","CENTER","translate","rotate","PI","text","resetMatrix","isNeighbor","other","UNIT","findExits","candidates","length","candidate","entrance","door","Door","push","exitLevel","to","findDungeonExit","findMaxLevelDescendent","maxChild","findPath","nextEntrance","from","findNonPathExit","maxLevelExit","findPathExit","find","placeKey","room","i","floor","nonPathExit","undefined","pathExit","isLocked","isVertical","a1","a2","a","line","x","y","ProceduralDungeon","generateDungeon","rooms","divide","dungeonEntrance","slice","dungeonExit","numKeys","renderDungeon","background","depth","results","width","height","isEven","middleX","middleY","proceduralDungeon","buttonRef","dungeon","document","body","clientWidth","setup","createCanvas","addEventListener","e","preventDefault","Button","forwardRef","children","props","type","button","ProceduralDungeonPage","Layout","title","content","legend","swatch","style","src","aFunction","PromiseCapability","C","resolve","reject","promise","$$resolve","$$reject","TypeError","f","$","$hypot","hypot","abs","sqrt","target","stat","forced","Infinity","NaN","value1","value2","arg","div","sum","aLen","arguments","larg","anObject","SPECIES","wellKnownSymbol","O","defaultConstructor","S","constructor","fails","Object","getOwnPropertySymbols","String","IS_PURE","NativePromise","getBuiltIn","speciesConstructor","promiseResolve","redefine","proto","real","prototype","call","then","onFinally","isFunction","shared","has","uid","USE_SYMBOL_AS_UID","WellKnownSymbolsStore","createWellKnownSymbol","withoutSetter","name","_objectWithoutPropertiesLoose","source","excluded","key","sourceKeys","keys","indexOf","isObject","newPromiseCapability","promiseCapability"],"mappings":"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","file":"component---src-pages-projects-simulations-procedural-dungeon-tsx-4402a334a251fdebd2c6.js","sourcesContent":["var NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = NATIVE_SYMBOL\n  /* global Symbol -- safe */\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","var global = require('../internals/global');\n\nmodule.exports = global.Promise;\n","import React, { useEffect, useRef } from 'react';\nimport P5 from 'p5';\nimport styles from './simulation.module.css';\n\nexport interface SimulationProps {\n  sketch: (p5: P5) => void;\n}\n\nexport const Simulation: React.FC<SimulationProps> = ({ sketch }) => {\n  const divRef = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    if (!divRef.current) return;\n    new P5(sketch, divRef.current);\n  }, []);\n\n  return <div className={styles.simulation} ref={divRef} />;\n};\n","import { MULTIPLIER } from './constants';\n\nexport const randomFromTo = (min: number, max: number) => (max - min) * Math.random() + min;\n\nexport const randomMiddle = (min: number, max: number) =>\n  min + (max - min) * (0.5 + randomFromTo(-MULTIPLIER, MULTIPLIER));\n","export const UNIT = 8;\nexport const DEPTH = 5;\nexport const MULTIPLIER = 0.25;\nexport const MIN_WALL_LENGTH = UNIT * 6;\nexport const DOOR_HALF_WIDTH = UNIT * 1.5;\nexport const SHOW_PATH = false;\nexport const SHOW_LEVELS = false;\n\nexport const COLOR_ROOM = '#004466';\nexport const COLOR_WALL = '#00ccff';\nexport const COLOR_ENTRANCE = '#0066aa';\nexport const COLOR_EXIT = '#002244';\nexport const COLOR_PATH = '#e1d2ff';\n","import P5 from 'p5';\nimport {\n  COLOR_ENTRANCE,\n  COLOR_EXIT,\n  COLOR_PATH,\n  COLOR_ROOM,\n  COLOR_WALL,\n  DOOR_HALF_WIDTH,\n  MIN_WALL_LENGTH,\n  SHOW_LEVELS,\n  SHOW_PATH,\n  UNIT,\n} from './constants';\nimport { Direction } from './types';\nimport { randomFromTo } from './util';\n\nexport class Room {\n  x1 = 0;\n  x2 = 0;\n  y1 = 0;\n  y2 = 0;\n  exits: Door[] = [];\n  entrance?: Door;\n  level = 0;\n  maxLevel = 0;\n  onPath = false;\n  hasKey = false;\n  isDungeonEntrance = false;\n  isDungeonExit = false;\n  p5: P5;\n\n  constructor(p5: P5, x1: number, x2: number, y1: number, y2: number) {\n    this.p5 = p5;\n    this.x1 = x1;\n    this.x2 = x2;\n    this.y1 = y1;\n    this.y2 = y2;\n  }\n\n  render() {\n    this.p5.strokeWeight(1.5);\n    this.p5.stroke(COLOR_WALL);\n    if (this.isDungeonEntrance) {\n      this.p5.fill(COLOR_ENTRANCE);\n    } else if (this.isDungeonExit) {\n      this.p5.fill(COLOR_EXIT);\n    } else if (SHOW_PATH && this.onPath) {\n      this.p5.fill(COLOR_PATH);\n    } else {\n      this.p5.fill(COLOR_ROOM);\n    }\n\n    this.p5.beginShape();\n    this.p5.vertex(this.x1, this.y1);\n    this.p5.vertex(this.x2, this.y1);\n    this.p5.vertex(this.x2, this.y2);\n    this.p5.vertex(this.x1, this.y2);\n    this.p5.vertex(this.x1, this.y1);\n    this.p5.endShape();\n\n    this.renderText();\n\n    this.exits.forEach((exit) => exit.render());\n  }\n\n  renderText() {\n    this.p5.noStroke();\n    if (!SHOW_LEVELS && !this.hasKey) return;\n\n    this.p5.fill(COLOR_WALL);\n\n    this.p5.textSize(19);\n    this.p5.textAlign(this.p5.CENTER, this.p5.CENTER);\n\n    if (this.hasKey) {\n      this.p5.translate(this.x1 + (this.x2 - this.x1) / 2, this.y1 + (this.y2 - this.y1) / 2);\n      this.p5.rotate((this.p5.PI * 3) / 4);\n      this.p5.text('F', 1, -5);\n      this.p5.text('O', -1, 7);\n      this.p5.resetMatrix();\n    } else {\n      this.p5.text(\n        this.level,\n        this.x1 + (this.x2 - this.x1) / 2,\n        this.y1 + (this.y2 - this.y1) / 2,\n      );\n    }\n  }\n\n  isNeighbor(other: Room): Direction | undefined {\n    // north\n    if (\n      this.y1 === other.y2 + UNIT &&\n      other.x2 - this.x1 > MIN_WALL_LENGTH &&\n      this.x2 - other.x1 > MIN_WALL_LENGTH\n    )\n      return 'north';\n\n    // east\n    if (\n      this.x2 === other.x1 - UNIT &&\n      other.y2 - this.y1 > MIN_WALL_LENGTH &&\n      this.y2 - other.y1 > MIN_WALL_LENGTH\n    )\n      return 'east';\n\n    // south\n    if (\n      this.y2 === other.y1 - UNIT &&\n      other.x2 - this.x1 > MIN_WALL_LENGTH &&\n      this.x2 - other.x1 > MIN_WALL_LENGTH\n    )\n      return 'south';\n\n    // west\n    if (\n      this.x1 === other.x2 + UNIT &&\n      other.y2 - this.y1 > MIN_WALL_LENGTH &&\n      this.y2 - other.y1 > MIN_WALL_LENGTH\n    )\n      return 'west';\n\n    return undefined;\n  }\n\n  findExits(candidates: Room[]) {\n    if (candidates.length === 0) return this.level;\n\n    candidates.forEach((candidate) => {\n      const direction = this.isNeighbor(candidate);\n\n      // ignore non-neighbors and rooms that have already been claimed\n      // ignore 15% of valid connections\n      if (!direction || candidate.entrance || Math.random() > 0.85) {\n        return;\n      }\n\n      const door = new Door(this.p5, this, candidate);\n      this.exits.push(door);\n      candidate.entrance = door;\n      candidate.level = this.level + 1;\n    });\n\n    this.maxLevel = this.level;\n\n    this.exits.forEach((exit) => {\n      const exitLevel = exit.to.findExits(candidates);\n      if (exitLevel > this.maxLevel) this.maxLevel = exitLevel;\n    });\n\n    return this.maxLevel;\n  }\n\n  findDungeonExit() {\n    if (!this.isDungeonEntrance) return;\n\n    const exit = this.findMaxLevelDescendent();\n    exit.isDungeonExit = true;\n    return exit;\n  }\n\n  findMaxLevelDescendent(): Room {\n    if (this.exits.length === 0) return this;\n\n    let maxChild = this.exits[0].to;\n\n    this.exits.forEach((exit) => {\n      const candidate = exit.to;\n\n      if (candidate.maxLevel > maxChild.maxLevel) maxChild = candidate;\n    });\n\n    return maxChild.findMaxLevelDescendent();\n  }\n\n  findPath() {\n    if (!this.isDungeonExit) return;\n\n    let nextEntrance = this.entrance;\n\n    while (nextEntrance) {\n      nextEntrance.onPath = true;\n      nextEntrance.from.onPath = true;\n\n      nextEntrance = nextEntrance.from.entrance;\n    }\n  }\n\n  findNonPathExit() {\n    let maxLevelExit: Door | undefined;\n\n    this.exits.forEach((exit) => {\n      if (exit.onPath) return;\n\n      if (!maxLevelExit || exit.to.maxLevel > maxLevelExit.to.maxLevel) {\n        maxLevelExit = exit;\n      }\n    });\n\n    return maxLevelExit;\n  }\n\n  findPathExit() {\n    return this.exits.find((exit) => exit.onPath);\n  }\n\n  /** Returns `true` if a key was successfully placed, `false` otherwise. */\n  placeKey() {\n    if (!this.isDungeonExit) return false;\n\n    const distance = Math.floor(randomFromTo(1, this.level));\n\n    let room: Room | undefined = this;\n\n    // walk up the tree for distance levels\n    for (let i = distance; i > 0 && room?.entrance; i--) {\n      room = room?.entrance?.from;\n    }\n\n    let nonPathExit: Door | undefined = undefined;\n\n    while (!nonPathExit) {\n      nonPathExit = room?.findNonPathExit();\n\n      if (!nonPathExit) {\n        if (!room?.entrance) return false;\n\n        // walk up another level\n        room = room.entrance.from;\n      }\n    }\n\n    // place the lock\n    const pathExit = room?.findPathExit();\n\n    if (!pathExit) return false;\n\n    pathExit.isLocked = true;\n\n    const keyRoom = nonPathExit.to.findMaxLevelDescendent();\n\n    // place the key\n    keyRoom.hasKey = true;\n\n    return true;\n  }\n}\n\nexport class Door {\n  from: Room;\n  to: Room;\n  onPath = false;\n  isLocked = false;\n  isVertical = false;\n  p5: P5;\n  x1!: number;\n  x2!: number;\n  y1!: number;\n  y2!: number;\n\n  constructor(p5: P5, from: Room, to: Room) {\n    this.p5 = p5;\n    this.from = from;\n    this.to = to;\n\n    const direction = from.isNeighbor(to);\n\n    // use the direction to set isVertical and the secondary axis\n    switch (direction) {\n      case 'north':\n        this.isVertical = false;\n        this.y1 = from.y1 - UNIT;\n        this.y2 = from.y1;\n        break;\n      case 'east':\n        this.isVertical = true;\n        this.x1 = from.x2;\n        this.x2 = from.x2 + UNIT;\n        break;\n      case 'south':\n        this.isVertical = false;\n        this.y1 = from.y2;\n        this.y2 = from.y2 + UNIT;\n        break;\n      case 'west':\n        this.isVertical = true;\n        this.x1 = from.x1 - UNIT;\n        this.x2 = from.x1;\n        break;\n    }\n\n    if (this.isVertical) {\n      const a1 = Math.max(from.y1, to.y1);\n      const a2 = Math.min(from.y2, to.y2);\n      const a =\n        Math.floor(randomFromTo(a1 + DOOR_HALF_WIDTH + UNIT, a2 - DOOR_HALF_WIDTH - UNIT) / UNIT) *\n        UNIT;\n\n      this.y1 = a - DOOR_HALF_WIDTH;\n      this.y2 = a + DOOR_HALF_WIDTH;\n    } else {\n      const a1 = Math.max(from.x1, to.x1);\n      const a2 = Math.min(from.x2, to.x2);\n      const a =\n        Math.floor(randomFromTo(a1 + DOOR_HALF_WIDTH + UNIT, a2 - DOOR_HALF_WIDTH - UNIT) / UNIT) *\n        UNIT;\n      this.x1 = a - DOOR_HALF_WIDTH;\n      this.x2 = a + DOOR_HALF_WIDTH;\n    }\n  }\n\n  render() {\n    // render rooms before doors\n    this.to.render();\n\n    // render a break in the wall\n    this.p5.noStroke();\n    this.p5.fill(COLOR_ROOM);\n    if (this.isVertical) {\n      this.p5.beginShape();\n      this.p5.vertex(this.x1 - 2, this.y1);\n      this.p5.vertex(this.x2 + 2, this.y1);\n      this.p5.vertex(this.x2 + 2, this.y2);\n      this.p5.vertex(this.x1 - 2, this.y2);\n      this.p5.endShape();\n    } else {\n      this.p5.beginShape();\n      this.p5.vertex(this.x1, this.y1 - 2);\n      this.p5.vertex(this.x2, this.y1 - 2);\n      this.p5.vertex(this.x2, this.y2 + 2);\n      this.p5.vertex(this.x1, this.y2 + 2);\n      this.p5.endShape();\n    }\n\n    // render the edges of the wall\n    this.p5.stroke(COLOR_WALL);\n    this.p5.strokeWeight(1.5);\n    if (this.isVertical) {\n      this.p5.line(this.x1, this.y1, this.x2, this.y1);\n      this.p5.line(this.x1, this.y2, this.x2, this.y2);\n    } else {\n      this.p5.line(this.x1, this.y1, this.x1, this.y2);\n      this.p5.line(this.x2, this.y1, this.x2, this.y2);\n    }\n\n    if (!this.isLocked) return;\n\n    // render the locked door\n    this.p5.stroke(COLOR_WALL);\n    this.p5.strokeWeight(UNIT / 2);\n    if (this.isVertical) {\n      const x = (this.x1 + this.x2) / 2;\n      this.p5.line(x, this.y1 + 2, x, this.y2 - 2);\n    } else {\n      const y = (this.y1 + this.y2) / 2;\n      this.p5.line(this.x1 + 2, y, this.x2 - 2, y);\n    }\n  }\n}\n","import P5 from 'p5';\nimport { UNIT, MIN_WALL_LENGTH, DEPTH } from './constants';\nimport { randomFromTo, randomMiddle } from './util';\nimport { Room } from './Room';\n\nexport class ProceduralDungeon {\n  p5: P5;\n  dungeonEntrance?: Room;\n  dungeonExit?: Room;\n  maxLevel = 0;\n\n  constructor(p5: P5) {\n    this.p5 = p5;\n  }\n\n  generateDungeon() {\n    // divide the canvas into rooms\n    const rooms = this.divide(DEPTH);\n\n    this.dungeonEntrance = rooms[0];\n    this.dungeonEntrance.isDungeonEntrance = true;\n\n    // connect those rooms with doors, storing the longest path\n    this.maxLevel = this.dungeonEntrance.findExits(rooms.slice(1));\n\n    // choose an exit\n    this.dungeonExit = this.dungeonEntrance.findDungeonExit();\n\n    // find the path from the entrance to the exit\n    this.dungeonExit?.findPath();\n\n    const numKeys = Math.floor(randomFromTo(1, 4));\n\n    // place locks on doors along the path\n    for (let i = 0; i < numKeys; i++) {\n      this.dungeonExit?.placeKey();\n    }\n  }\n\n  renderDungeon() {\n    this.p5.background(0);\n    this.dungeonEntrance?.render();\n  }\n\n  divide(depth: number, room?: Room, results?: Room[]): Room[] {\n    if (!room || !results) {\n      return this.divide(\n        depth,\n        new Room(this.p5, UNIT, this.p5.width - UNIT, UNIT, this.p5.height - UNIT),\n        [],\n      );\n    }\n\n    if (depth === 0) {\n      return [...results, room];\n    }\n\n    const flip = Math.random() > 0.85; // 15% of the time, break from the normal pattern\n    const isEven = depth % 2 === 0;\n    const isVertical = flip ? isEven : !isEven;\n\n    if (isVertical) {\n      const middleX = randomMiddle(room.x1, room.x2);\n\n      if (room.x2 - (middleX + UNIT) < MIN_WALL_LENGTH || middleX - room.x1 < MIN_WALL_LENGTH) {\n        return this.divide(depth - 1, room, results);\n      }\n\n      return [\n        ...this.divide(depth - 1, new Room(this.p5, room.x1, middleX, room.y1, room.y2), results),\n        ...this.divide(\n          depth - 1,\n          new Room(this.p5, middleX + UNIT, room.x2, room.y1, room.y2),\n          results,\n        ),\n      ];\n    }\n\n    const middleY = randomMiddle(room.y1, room.y2);\n\n    if (room.y2 - (middleY + UNIT) < MIN_WALL_LENGTH || middleY - room.y1 < MIN_WALL_LENGTH) {\n      return this.divide(depth - 1, room, results);\n    }\n\n    return [\n      ...this.divide(depth - 1, new Room(this.p5, room.x1, room.x2, room.y1, middleY), results),\n      ...this.divide(\n        depth - 1,\n        new Room(this.p5, room.x1, room.x2, middleY + UNIT, room.y2),\n        results,\n      ),\n    ];\n  }\n}\n","import { RefObject } from 'react';\nimport P5 from 'p5';\nimport { ProceduralDungeon } from './ProceduralDungeon';\n\nexport const proceduralDungeon = (buttonRef: RefObject<HTMLButtonElement>) => (p5: P5) => {\n  const dungeon = new ProceduralDungeon(p5);\n  const width = Math.min(document.body.clientWidth - 100, 700);\n  // if the width is less than 662, assume we're on a vertical screen\n  const height = width < 662 ? (width * 4) / 3 : (width * 3) / 4;\n\n  p5.setup = function () {\n    p5.createCanvas(width, height);\n    p5.noStroke();\n\n    dungeon.generateDungeon();\n    dungeon.renderDungeon();\n  };\n\n  // TODO: there's got to be a better way to do this\n  buttonRef.current?.addEventListener('click', (e) => {\n    e.preventDefault();\n\n    dungeon.generateDungeon();\n    dungeon.renderDungeon();\n  });\n};\n","import React, { forwardRef } from 'react';\nimport styles from './button.module.css';\n\nexport const Button = forwardRef<HTMLButtonElement, React.ButtonHTMLAttributes<HTMLButtonElement>>(\n  ({ children, ...props }, ref) => {\n    return (\n      <button ref={ref} type=\"button\" {...props} className={styles.button}>\n        {children}\n      </button>\n    );\n  },\n);\n","import React, { useRef } from 'react';\nimport { PageProps } from 'gatsby';\nimport Layout from '../../../components/Layout';\nimport { Simulation } from '../../../components/Simulation';\nimport { proceduralDungeon } from '../../../simulations/procedural-dungeon';\nimport { COLOR_ENTRANCE, COLOR_EXIT } from '../../../simulations/procedural-dungeon/constants';\nimport styles from './dungeon.module.css';\nimport { Button } from '../../../components/Button';\n\nconst ProceduralDungeonPage: React.FC<PageProps> = () => {\n  const buttonRef = useRef<HTMLButtonElement>(null);\n\n  return (\n    <Layout title=\"Procedural Dungeon\">\n      <div className={styles.content}>\n        <h1>Procedural Dungeon</h1>A dungeon created using procedural generation. Start from the\n        light blue room and try to navigate to the dark blue room. If a locked door blocks your\n        path, find a key to open it.\n        <div className={styles.legend}>\n          <div>\n            <span className={styles.swatch} style={{ background: COLOR_ENTRANCE }} /> Entrance\n          </div>\n          <div>\n            <span className={styles.swatch} style={{ background: COLOR_EXIT }} /> Exit\n          </div>\n          <div>\n            <img className={styles.swatch} src=\"/images/dungeon_lock.png\" /> Locked door\n          </div>\n          <div>\n            <img className={styles.swatch} src=\"/images/dungeon_key.png\" /> Key\n          </div>\n        </div>\n        <h2>Demo</h2>\n        <Simulation sketch={proceduralDungeon(buttonRef)} />\n        <Button ref={buttonRef}>Generate a new dungeon</Button>\n        <h2>How it works</h2>\n        <h3>Generating rooms</h3>\n        The algorithm starts with a single large room. It chooses a random point and adds a wall to\n        split the room into two new rooms. It repeats this process with each room until the dungeon\n        is sufficiently complex.\n        <div className={styles.rooms}>\n          <img src=\"/images/dungeon_0.png\" />\n          <img src=\"/images/dungeon_1.png\" />\n          <img src=\"/images/dungeon_2.png\" />\n          <img src=\"/images/dungeon_3.png\" />\n        </div>\n        <h3>Adding doors</h3>\n        Next, the algorithm chooses a room to be the entrance. It creates a door to each neighbor at\n        a random point along the shared wall. For each newly connected room, the process is\n        repeated. The result is a tree structure of rooms starting from the dungeon entrance.\n        <h3>Choosing an exit</h3>\n        The dungeon exit is chosen to be the room at the greatest depth, that is the furthest number\n        of doors from the dungeon entrance. There is only one path from the entrance to the exit.\n        <h3>Placing keys &amp; locks</h3>\n        The dungeon will have between one and four locked doors, each along the direct path from the\n        entrance to the exit. For each locked door, a key is placed in a room further up the tree.\n      </div>\n    </Layout>\n  );\n};\n\nexport default ProceduralDungeonPage;\n","'use strict';\nvar aFunction = require('../internals/a-function');\n\nvar PromiseCapability = function (C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n};\n\n// 25.4.1.5 NewPromiseCapability(C)\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","var $ = require('../internals/export');\n\nvar $hypot = Math.hypot;\nvar abs = Math.abs;\nvar sqrt = Math.sqrt;\n\n// Chrome 77 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=9546\nvar BUGGY = !!$hypot && $hypot(Infinity, NaN) !== Infinity;\n\n// `Math.hypot` method\n// https://tc39.es/ecma262/#sec-math.hypot\n$({ target: 'Math', stat: true, forced: BUGGY }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  hypot: function hypot(value1, value2) {\n    var sum = 0;\n    var i = 0;\n    var aLen = arguments.length;\n    var larg = 0;\n    var arg, div;\n    while (i < aLen) {\n      arg = abs(arguments[i++]);\n      if (larg < arg) {\n        div = larg / arg;\n        sum = sum * div * div + 1;\n        larg = arg;\n      } else if (arg > 0) {\n        div = arg / larg;\n        sum += div * div;\n      } else sum += arg;\n    }\n    return larg === Infinity ? Infinity : larg * sqrt(sum);\n  }\n});\n","var anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `SpeciesConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-speciesconstructor\nmodule.exports = function (O, defaultConstructor) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? defaultConstructor : aFunction(S);\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  // Chrome 38 Symbol has incorrect toString conversion\n  /* global Symbol -- required for testing */\n  return !String(Symbol());\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"simulation\":\"simulation-module--simulation--3alRv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"button-module--button--1AP7e\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"dungeon-module--content--1CRg0\",\"legend\":\"dungeon-module--legend--2XZJ5\",\"swatch\":\"dungeon-module--swatch--3B54k\",\"rooms\":\"dungeon-module--rooms--2XZ_V\"};","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar NativePromise = require('../internals/native-promise-constructor');\nvar fails = require('../internals/fails');\nvar getBuiltIn = require('../internals/get-built-in');\nvar speciesConstructor = require('../internals/species-constructor');\nvar promiseResolve = require('../internals/promise-resolve');\nvar redefine = require('../internals/redefine');\n\n// Safari bug https://bugs.webkit.org/show_bug.cgi?id=200829\nvar NON_GENERIC = !!NativePromise && fails(function () {\n  NativePromise.prototype['finally'].call({ then: function () { /* empty */ } }, function () { /* empty */ });\n});\n\n// `Promise.prototype.finally` method\n// https://tc39.es/ecma262/#sec-promise.prototype.finally\n$({ target: 'Promise', proto: true, real: true, forced: NON_GENERIC }, {\n  'finally': function (onFinally) {\n    var C = speciesConstructor(this, getBuiltIn('Promise'));\n    var isFunction = typeof onFinally == 'function';\n    return this.then(\n      isFunction ? function (x) {\n        return promiseResolve(C, onFinally()).then(function () { return x; });\n      } : onFinally,\n      isFunction ? function (e) {\n        return promiseResolve(C, onFinally()).then(function () { throw e; });\n      } : onFinally\n    );\n  }\n});\n\n// patch native Promise.prototype for native async functions\nif (!IS_PURE && typeof NativePromise == 'function' && !NativePromise.prototype['finally']) {\n  redefine(NativePromise.prototype, 'finally', getBuiltIn('Promise').prototype['finally']);\n}\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar has = require('../internals/has');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!has(WellKnownSymbolsStore, name)) {\n    if (NATIVE_SYMBOL && has(Symbol, name)) WellKnownSymbolsStore[name] = Symbol[name];\n    else WellKnownSymbolsStore[name] = createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","var anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar newPromiseCapability = require('../internals/new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n"],"sourceRoot":""}