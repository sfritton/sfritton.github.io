(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{B3q3:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("zLVn"),r=n("q1tI"),a=n.n(r),l=n("eqM9"),o=n.n(l),s=Object(r.forwardRef)((function(e,t){var n=e.children,r=Object(i.a)(e,["children"]);return a.a.createElement("button",Object.assign({ref:t,type:"button"},r,{className:o.a.button}),n)}))},RKwE:function(e,t,n){e.exports={controls:"landscape-module--controls--2ouir"}},ZIQu:function(e,t,n){e.exports={biomeList:"legend-module--biomeList--FhW6c",endcap:"legend-module--endcap--1UM4E",labels:"legend-module--labels--FlKeS",gradientLegend:"legend-module--gradientLegend--EuXXE",gradientChunk:"legend-module--gradientChunk--2odrr"}},eqM9:function(e,t,n){e.exports={button:"button-module--button--1AP7e"}},iD54:function(e,t,n){"use strict";n.r(t);var i=n("q1tI"),r=n.n(i),a=n("VXBa"),l=n("u7b8"),o=n("dI71"),s=n("mCOQ"),c=["#005000","#005000","#aab432","#d2e66e"],u=["#0000ff","#ffffff","#ff0000"],f=["#960000","#960000","#fa9600","#ffffff","#009600","#00ffff","#00ffff"],d=["elevation","temperature","precipitation","biome"],p=function e(t,n,i){if(0===i.length)return t.color("#000000");if(1===i.length)return t.color(i[0]);if(2===i.length){var r=t.red(i[1])-t.red(i[0]),a=t.green(i[1])-t.green(i[0]),l=t.blue(i[1])-t.blue(i[0]);return t.color(t.red(i[0])+r*n,t.green(i[0])+a*n,t.blue(i[0])+l*n)}for(var o=0;o<i.length-1;o++){var s=1/(i.length-1)*(o+1),c=1/(i.length-1)*o;if(n<s)return e(t,(n-c)/(s-c),i.slice(o,o+2))}return t.color(i[i.length-1])},h=function(e,t,n,i){for(var r=0;r<t;r++){var a=1/t*(r+1);if(n<a)return p(e,a,i)}return e.color(i[i.length-1])},m=(n("E9XD"),n("zRY8")),v=function(){function e(e,t,n,i){this.p5=e,this.seed=t,this.frequency=n,this.amplitude=i}return e.prototype.getValueAt=function(e,t){return this.amplitude*this.p5.noise((this.seed.x+t)*this.frequency,(this.seed.y+e)*this.frequency)},e}(),b=function(){function e(e,t,n,i){this.p5=e,this.waves=[];for(var r=0;r<i;r++){var a=Math.pow(2,r),l={x:t.x+Object(m.a)(a-1,a),y:t.y+Object(m.a)(a-1,a)};this.waves.push(new v(this.p5,l,n/a,a))}}return e.prototype.getValueAt=function(e,t){var n=this.waves.reduce((function(n,i){return{result:n.result+i.getValueAt(e,t),max:n.max+i.amplitude}}),{result:0,max:0}),i=n.result,r=n.max;return r>0?this.p5.norm(i,0,r):0},e}(),g=function(){function e(e,t){this.title=e,this.color=t}return e.prototype.toString=function(){return this.title},e}(),w=new g("Water","#6485dc"),E=new g("Tundra","#cdccf1"),y=new g("Mountain","#6d65b2"),S=new g("Snowy","#d4ffff"),z=new g("Rocky","#556973"),k=new g("Temperate","#126341"),j=new g("Marsh","#a8dd75"),O=new g("Desert","#e3b365"),T=new g("Prairie","#48a32f"),L=new g("Rainforest","#e33d00"),M=[w,E,y,S,z,k,j,O,T,L],x=function(){function e(e,t){this.p5=e,this.tileSize=t,this.rows=Math.floor(this.p5.height/this.tileSize),this.columns=Math.floor(this.p5.width/this.tileSize);var n=new b(this.p5,this.randomSeed(400),.07*this.tileSize,4),i=new b(this.p5,this.randomSeed(800),.002*this.tileSize,2),r=new b(this.p5,this.randomSeed(800),.007*this.tileSize,2);this.tiles=new Array(this.rows);for(var a=0;a<this.rows;a++){this.tiles[a]=new Array(this.columns);for(var l=0;l<this.columns;l++){var o=n.getValueAt(a,l);this.tiles[a][l]={elevation:o,precipitation:i.getValueAt(a,l),temperature:this.p5.norm(r.getValueAt(a,l)-.75*(o-.5),-.375,1.375)}}}}var t=e.prototype;return t.render=function(e){var t=this;this.p5.noStroke(),this.tiles.forEach((function(n,i){return n.forEach((function(n,r){t.setTileFill(e,n),t.p5.rect(r*t.tileSize,i*t.tileSize,t.tileSize,t.tileSize)}))}))},t.setTileFill=function(e,t){var n,i;if(t.elevation<.4)this.p5.fill("#6485dc");else switch(e){case"elevation":this.p5.fill(h(this.p5,15,t.elevation,c));break;case"temperature":this.p5.fill(h(this.p5,15,t.temperature,u));break;case"precipitation":this.p5.fill(h(this.p5,15,t.precipitation,f));break;case"biome":var r=(n=t.temperature,i=t.precipitation,n<.45?i<.45?E:i<.55?y:S:n<.55?i<.45?z:i<.55?k:j:i<.45?O:i<.55?T:L);this.p5.fill(r.color)}},t.randomSeed=function(e){return void 0===e&&(e=1),{x:Object(m.a)(0,this.columns)*e,y:Object(m.a)(0,this.rows)*e}},e}(),R=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).mapType="elevation",i.tileSize=n,i}Object(o.a)(t,e);var n=t.prototype;return n.setup=function(){e.prototype.setup.call(this),this.createWorld(),this.render()},n.createWorld=function(){this.tileGrid=new x(this.p5,this.tileSize)},n.render=function(){this.tileGrid.render(this.mapType)},n.updateMapType=function(e){this.mapType=e,this.render()},t}(s.a),q=function(e,t,n){return void 0===n&&(n=10),function(i){var r,a,l=new R(i,n);i.setup=function(){l.setup()},null===(r=e.current)||void 0===r||r.addEventListener("click",(function(e){e.preventDefault(),l.createWorld(),l.render()})),null===(a=t.current)||void 0===a||a.addEventListener("change",(function(e){var t;e.preventDefault();var n=null===(t=e.target)||void 0===t?void 0:t.value;l.updateMapType(n)}))}},A=n("ucHa"),N=n("B3q3"),V=n("RKwE"),C=n.n(V),D=n("ZIQu"),I=n.n(D),F={elevation:c,precipitation:f,temperature:u,biome:[]},G=function(e){var t=e.mapType;if("biome"===t)return r.a.createElement("div",null,r.a.createElement("b",null,"Biomes"),r.a.createElement("ul",{className:I.a.biomeList},M.map((function(e){var t=e.title,n=e.color;return r.a.createElement("li",{key:t,style:{"--biome-color":n}},t)}))));var n=F[t];return r.a.createElement("div",null,r.a.createElement("div",{className:I.a.labels},r.a.createElement("div",null,"Low"),r.a.createElement("div",null,"High")),r.a.createElement("div",{className:I.a.gradientLegend},n.map((function(e,t){return 0===t?null:r.a.createElement("div",{key:e+"-"+t,className:I.a.gradientChunk,style:{"--start-color":n[t-1],"--end-color":e}})}))))},W=n("8Rtz");t.default=function(e){var t,n=e.location,o=Object(i.useState)("elevation"),s=o[0],c=o[1],u=Object(i.useRef)(null),f=Object(i.useRef)(null),p=null===(t=n.search.replace("?","").split("&").map((function(e){return e.split("=")})).find((function(e){return"tileSize"===e[0]})))||void 0===t?void 0:t[1],h=p?Number(p):void 0;return r.a.createElement(a.a,{title:"Landscape Generator"},r.a.createElement("h1",null,"Landscape Generator"),r.a.createElement("div",null,"A procedural landscape generator that uses two-dimensional"," ",r.a.createElement(W.a,{href:"https://en.wikipedia.org/wiki/Perlin_noise"},"Perlin noise")," ","to create a grid of tiles with elevation, precipitation, and climate values. The temperature for each tile is determined by both its elevation and its climate. From there, each tile is assigned to a biome (Rainforest, Desert, etc.) based on its temperature and its precipitation."),r.a.createElement("h2",null,"Demo"),r.a.createElement(l.a,{sketch:q(u,f,h)}),r.a.createElement(G,{mapType:s}),r.a.createElement("div",{className:C.a.controls},r.a.createElement("div",null,r.a.createElement(A.a,{label:"Map Type",ref:f,onChange:function(e){c(e.target.value)}},d.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement(N.a,{ref:u},"Generate a new landscape")))}},igCo:function(e,t,n){e.exports={select:"select-module--select--3j8Sy",label:"select-module--label--2swTM"}},ucHa:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("zLVn"),r=n("q1tI"),a=n.n(r),l=n("igCo"),o=n.n(l),s=Object(r.forwardRef)((function(e,t){var n=e.children,r=e.label,l=Object(i.a)(e,["children","label"]);return a.a.createElement("label",{className:o.a.select},a.a.createElement("span",{className:o.a.label},r),a.a.createElement("select",Object.assign({ref:t},l),n))}))},zRY8:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e,t){return(t-e)*Math.random()+e}}}]);
//# sourceMappingURL=component---src-pages-projects-simulations-landscape-index-tsx-294715cf5a774b53b21d.js.map